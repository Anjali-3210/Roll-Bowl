<!DOCTYPE html>
<html>
  <head>
    <title>Roll Bowl</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
  </head>

  <body>
    <div class="container">

      <!-- LOGO -->
      <img src="/rollbowllogo.png" alt="Roll Bowl Logo" class="logo" />
      <p class="subtitle">Healthy Choice, Zero Compromise</p>

      <!-- SUBSCRIPTION DASHBOARD -->
      <div class="card">
        <p><strong>Plan:</strong> <%= subscription.planType %></p>
        <p><strong>Start Date:</strong> <%= subscription.startDate.toDateString() %></p>
        <p><strong>Valid Till:</strong> <%= subscription.endDate.toDateString() %></p>
        <p>
          <strong>Meals Used:</strong>
          <%= subscription.mealsConsumed %> / <%= subscription.totalMeals %>
        </p>
        <p>
          <strong>Meals Remaining:</strong>
          <%= subscription.totalMeals - subscription.mealsConsumed %>
        </p>
      </div>

      <!-- GREETING -->
      <h1>Hello <%= name %></h1>

      <!-- MENU + VOTING -->
      <% if (todayMenu) { %>
       <h2>Today's Menu</h2>

<form method="POST" action="/vote-ui">
  <input type="hidden" name="token" value="<%= token %>" />

  <% 
    const items = todayMenu.items.split(',').map(i => i.trim());
    const isPremium = subscription.planType === "PREMIUM";
  %>

  <% if (!isPremium) { %>
    <!-- BASIC PLAN: ONE ITEM ONLY -->
    <% items.forEach(item => { %>
      <div>
        <input
          type="radio"
          name="choice"
          value="<%= item %>"
          required
        />
        <label><%= item %></label>
      </div>
    <% }) %>

  <% } else { %>
    <!-- PREMIUM PLAN: TWO ITEMS -->
    <% items.forEach(item => { %>
      <div>
        <input
          type="checkbox"
          name="choice"
          value="<%= item %>"
        />
        <label><%= item %></label>
      </div>
    <% }) %>

    <p style="font-size:12px;color:#666;">
      * Premium plan allows 2 items (1 roll + 1 bowl)
    </p>
  <% } %>

  <br />

  <button type="submit" name="willEat" value="true" class="btn-success">
    I will eat tomorrow
  </button>

  <button type="submit" name="willEat" value="false" class="btn-accent">
    I will skip tomorrow
  </button>
</form>

    </div>
  </body>
</html>







